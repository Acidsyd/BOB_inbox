# Production Environment Configuration
# Copy this to .env.production and fill in actual values

# ==============================================
# CORE APPLICATION SETTINGS
# ==============================================
NODE_ENV=production
FRONTEND_URL=https://your-domain.com
BACKEND_URL=https://api.your-domain.com

# ==============================================
# DATABASE CONFIGURATION (Supabase)
# ==============================================
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_SERVICE_KEY=your-service-role-key-here
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-public-key-here

# ==============================================
# REDIS CONFIGURATION
# ==============================================
REDIS_URL=redis://username:password@redis-host:6379
REDIS_HOST=your-redis-host.com
REDIS_PORT=6379
REDIS_PASSWORD=your-strong-redis-password
REDIS_DB=0

# Redis Connection Optimization (Production)
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=100
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_KEEPALIVE=30000

# Queue Configuration
QUEUE_REDIS_DB=1
QUEUE_REDIS_KEY_PREFIX=mailsender:prod:queue:

# ==============================================
# SECURITY CONFIGURATION
# ==============================================
# Generate strong secrets: openssl rand -base64 32
JWT_SECRET=your-super-secure-jwt-secret-here-minimum-32-characters
JWT_REFRESH_SECRET=your-super-secure-refresh-secret-here-minimum-32-characters

# Generate encryption key: openssl rand -base64 32
EMAIL_ENCRYPTION_KEY=your-32-character-encryption-key-here

# Session Security
SESSION_SECRET=your-session-secret-here

# ==============================================
# OAUTH2 CONFIGURATION (Google Gmail API)
# ==============================================
GOOGLE_OAUTH2_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_OAUTH2_CLIENT_SECRET=your-google-client-secret
GOOGLE_OAUTH2_REDIRECT_URI=https://api.your-domain.com/api/oauth2/gmail/callback

# Microsoft OAuth2 (Optional)
MICROSOFT_OAUTH2_CLIENT_ID=your-microsoft-app-id
MICROSOFT_OAUTH2_CLIENT_SECRET=your-microsoft-app-secret
MICROSOFT_OAUTH2_REDIRECT_URI=https://api.your-domain.com/api/oauth2/microsoft/callback
MICROSOFT_OAUTH2_TENANT=common

# ==============================================
# STRIPE PAYMENT CONFIGURATION
# ==============================================
# Use live keys for production (sk_live_... and pk_live_...)
STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_publishable_key

# Stripe Configuration
STRIPE_WEBHOOK_URL=https://api.your-domain.com/api/webhooks/stripe

# ==============================================
# EMAIL CONFIGURATION
# ==============================================
# SMTP Configuration (Backup/System emails)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-system-email@your-domain.com
SMTP_PASS=your-app-password

# Email Settings
FROM_EMAIL=noreply@your-domain.com
FROM_NAME=Mailsender Platform

# ==============================================
# RATE LIMITING & SECURITY
# ==============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS Configuration
CORS_ORIGIN=https://your-domain.com

# ==============================================
# LOGGING & MONITORING
# ==============================================
LOG_LEVEL=info
LOG_FILE_PATH=./logs
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14
LOG_DATE_PATTERN=YYYY-MM-DD

# Sentry Error Tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Application Monitoring
NEW_RELIC_LICENSE_KEY=your-new-relic-license-key
NEW_RELIC_APP_NAME=Mailsender Production

# ==============================================
# WEBHOOK CONFIGURATION
# ==============================================
WEBHOOK_TIMEOUT=30000
WEBHOOK_MAX_RETRIES=3

# ==============================================
# QUEUE PROCESSING CONFIGURATION
# ==============================================
# Job Processing Settings (Production Optimized)
QUEUE_DEFAULT_ATTEMPTS=3
QUEUE_EXPONENTIAL_BACKOFF_DELAY=2000
QUEUE_STALLED_INTERVAL=30000
QUEUE_MAX_STALLED_COUNT=1

# Queue Cleanup (Aggressive for production)
QUEUE_REMOVE_ON_COMPLETE=10
QUEUE_REMOVE_ON_FAIL=50
QUEUE_CLEANUP_COMPLETED_AGE=3600000
QUEUE_CLEANUP_FAILED_AGE=86400000

# Queue Monitoring
QUEUE_HEALTH_CHECK_INTERVAL=30000
QUEUE_ALERT_WAITING_THRESHOLD=500
QUEUE_ALERT_FAILED_THRESHOLD=50
QUEUE_ALERT_ACTIVE_TIMEOUT=300000

# Queue Concurrency (Production Optimized)
QUEUE_EMAIL_CAMPAIGN_CONCURRENCY=10
QUEUE_LEAD_PROCESSING_CONCURRENCY=15
QUEUE_EMAIL_DELIVERY_CONCURRENCY=5
QUEUE_ANALYTICS_CONCURRENCY=3
QUEUE_WEBHOOK_CONCURRENCY=8

# ==============================================
# PERFORMANCE OPTIMIZATION
# ==============================================
# Node.js Optimization
UV_THREADPOOL_SIZE=128
NODE_OPTIONS="--max-old-space-size=2048"

# Application Performance
MAX_REQUEST_SIZE=10mb
REQUEST_TIMEOUT=30000

# ==============================================
# SSL/TLS CONFIGURATION
# ==============================================
# SSL Certificate Paths (if using custom certificates)
SSL_CERT_PATH=/etc/ssl/certs/your-domain.pem
SSL_KEY_PATH=/etc/ssl/private/your-domain.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.pem

# Force HTTPS
FORCE_HTTPS=true

# ==============================================
# BACKUP & RECOVERY
# ==============================================
# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE=s3://your-backup-bucket

# ==============================================
# FEATURE FLAGS
# ==============================================
# Feature Toggles
FEATURE_ANALYTICS_V2=true
FEATURE_AI_CONTENT=false
FEATURE_MULTI_LANGUAGE=true
FEATURE_ADVANCED_REPORTING=true

# ==============================================
# THIRD-PARTY INTEGRATIONS
# ==============================================
# OpenAI API (Optional - for AI features)
OPENAI_API_KEY=sk-your-openai-api-key

# SendGrid API (Optional - backup email service)
SENDGRID_API_KEY=SG.your-sendgrid-api-key

# AWS Configuration (for file storage, etc.)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=eu-west-1
AWS_S3_BUCKET=your-s3-bucket

# ==============================================
# CONTAINER/KUBERNETES CONFIGURATION
# ==============================================
# Health Check Configuration
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# Graceful Shutdown
GRACEFUL_SHUTDOWN_TIMEOUT=30000

# ==============================================
# DEVELOPMENT/DEBUG (Set to false in production)
# ==============================================
DEBUG=false
BULL_BOARD_ENABLED=false
ENABLE_PLAYGROUND=false
SKIP_SIGNATURE_VALIDATION=false

# Next.js Telemetry (Disable for privacy)
NEXT_TELEMETRY_DISABLED=1

# ==============================================
# DOMAIN & URL CONFIGURATION
# ==============================================
DOMAIN=your-domain.com
SUBDOMAIN_API=api
SUBDOMAIN_APP=app

# WebSocket Configuration
NEXT_PUBLIC_WS_URL=wss://api.your-domain.com

# ==============================================
# TIMEZONE & LOCALIZATION
# ==============================================
TZ=Europe/Amsterdam
DEFAULT_LOCALE=en
SUPPORTED_LOCALES=en,de,fr,es,it,nl

# ==============================================
# LEGAL & COMPLIANCE
# ==============================================
PRIVACY_POLICY_URL=https://your-domain.com/privacy
TERMS_OF_SERVICE_URL=https://your-domain.com/terms
COOKIE_POLICY_URL=https://your-domain.com/cookies

# Data Retention (GDPR Compliance)
DATA_RETENTION_DAYS=365
LOG_RETENTION_DAYS=90