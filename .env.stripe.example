# ============================================================================
# STRIPE PAYMENT INTEGRATION - ENVIRONMENT VARIABLES
# ============================================================================
# 
# Complete Stripe configuration for the B2B Email Marketing Platform
# Copy this file to your .env file and replace placeholder values with your actual Stripe credentials
#
# IMPORTANT SECURITY NOTES:
# - Never commit real Stripe keys to version control
# - Use test keys for development and live keys for production
# - Rotate webhook secrets regularly
# - Enable Stripe's radar for fraud prevention
#
# SETUP INSTRUCTIONS:
# 1. Create a Stripe account at https://stripe.com
# 2. Get your API keys from https://dashboard.stripe.com/apikeys
# 3. Set up webhook endpoints at https://dashboard.stripe.com/webhooks
# 4. Configure products and prices (or enable auto-creation)
# 5. Set up tax settings for EU compliance
#
# ============================================================================

# ----------------------------------------------------------------------------
# CORE STRIPE CONFIGURATION
# ----------------------------------------------------------------------------

# Stripe API Keys (get from: https://dashboard.stripe.com/apikeys)
# Test keys start with sk_test_ and pk_test_
# Live keys start with sk_live_ and pk_live_
STRIPE_SECRET_KEY=sk_test_51234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef12
STRIPE_PUBLISHABLE_KEY=pk_test_51234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef12

# Webhook Configuration (get from: https://dashboard.stripe.com/webhooks)
# Create webhook endpoint: https://your-domain.com/api/webhooks/stripe
STRIPE_WEBHOOK_SECRET=whsec_1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef12
STRIPE_WEBHOOK_URL=https://your-domain.com/api/webhooks/stripe

# Product Auto-Creation (set to 'true' to automatically create products in Stripe)
STRIPE_AUTO_CREATE_PRODUCTS=true

# ----------------------------------------------------------------------------
# PRICING CONFIGURATION (EUR-focused European pricing)
# ----------------------------------------------------------------------------

# Basic Plan Pricing (€15/month, €150/year)
STRIPE_BASIC_MONTHLY_PRICE_ID=price_1234567890abcdef12345678
STRIPE_BASIC_YEARLY_PRICE_ID=price_1234567890abcdef12345679

# Full Plan Pricing (€30/month, €300/year)
STRIPE_FULL_MONTHLY_PRICE_ID=price_1234567890abcdef1234567a
STRIPE_FULL_YEARLY_PRICE_ID=price_1234567890abcdef1234567b

# ----------------------------------------------------------------------------
# PROMOTIONAL CAMPAIGNS
# ----------------------------------------------------------------------------

# EARLY100 Promotion - 50% off Full Plan yearly for first 100 users
STRIPE_EARLY100_COUPON_ID=coupon_early100_launch_2024
STRIPE_EARLY100_PROMO_CODE_ID=promo_early100_launch_2024

# Promotional Settings
STRIPE_EARLY100_MAX_REDEMPTIONS=100
STRIPE_EARLY100_DISCOUNT_PERCENT=50
STRIPE_EARLY100_VALID_UNTIL=2024-12-31T23:59:59Z

# ----------------------------------------------------------------------------
# EU COMPLIANCE & TAX CONFIGURATION
# ----------------------------------------------------------------------------

# Tax Configuration for European Operations
STRIPE_ENABLE_TAX_CALCULATION=true
STRIPE_ENABLE_AUTOMATIC_TAX=true
STRIPE_DEFAULT_COUNTRY=NL
STRIPE_DEFAULT_CURRENCY=EUR

# EU VAT Settings
STRIPE_EU_VAT_COMPLIANT=true
STRIPE_ENABLE_REVERSE_CHARGE=true
STRIPE_TAX_BEHAVIOR=inclusive

# Supported European Countries (comma-separated ISO codes)
STRIPE_SUPPORTED_COUNTRIES=AT,BE,BG,HR,CY,CZ,DK,EE,FI,FR,DE,GR,HU,IE,IT,LV,LT,LU,MT,NL,PL,PT,RO,SK,SI,ES,SE

# ----------------------------------------------------------------------------
# PAYMENT METHODS CONFIGURATION
# ----------------------------------------------------------------------------

# European Payment Methods (enabled by default)
STRIPE_ENABLE_SEPA_DEBIT=true
STRIPE_ENABLE_IDEAL=true
STRIPE_ENABLE_BANCONTACT=true
STRIPE_ENABLE_GIROPAY=true
STRIPE_ENABLE_SOFORT=true
STRIPE_ENABLE_EPS=true
STRIPE_ENABLE_P24=true
STRIPE_ENABLE_MULTIBANCO=true
STRIPE_ENABLE_BLIK=true

# Alternative Payment Methods
STRIPE_ENABLE_KLARNA=false
STRIPE_ENABLE_ALIPAY=false
STRIPE_ENABLE_WECHAT_PAY=false

# ----------------------------------------------------------------------------
# CHECKOUT & CUSTOMER PORTAL CONFIGURATION
# ----------------------------------------------------------------------------

# Checkout Session Configuration
STRIPE_SUCCESS_URL=https://your-domain.com/billing/success
STRIPE_CANCEL_URL=https://your-domain.com/pricing
STRIPE_RETURN_URL=https://your-domain.com/settings/billing

# Customer Portal Configuration
STRIPE_ENABLE_CUSTOMER_PORTAL=true
STRIPE_PORTAL_RETURN_URL=https://your-domain.com/settings/billing
STRIPE_ENABLE_SUBSCRIPTION_CANCEL=true
STRIPE_ENABLE_SUBSCRIPTION_UPDATE=true
STRIPE_ENABLE_INVOICE_HISTORY=true

# Terms and Privacy (required for EU compliance)
PRIVACY_POLICY_URL=https://your-domain.com/privacy
TERMS_URL=https://your-domain.com/terms

# ----------------------------------------------------------------------------
# BILLING & INVOICING
# ----------------------------------------------------------------------------

# Invoice Configuration
STRIPE_INVOICE_RETENTION_DAYS=2555
STRIPE_ENABLE_INVOICE_PDF=true
STRIPE_INVOICE_FOOTER="B2B Email Marketing Platform - Professional Email Automation with Account Management and API Integration"

# Payment Retry Configuration
STRIPE_PAYMENT_RETRY_ATTEMPTS=3
STRIPE_PAYMENT_RETRY_DELAYS=24,72,168
STRIPE_GRACE_PERIOD_HOURS=72

# Dunning Management
STRIPE_ENABLE_DUNNING=true
STRIPE_DUNNING_SOFT_DAYS=3
STRIPE_DUNNING_FIRM_DAYS=7
STRIPE_DUNNING_FINAL_DAYS=14

# ----------------------------------------------------------------------------
# SECURITY & COMPLIANCE
# ----------------------------------------------------------------------------

# Security Settings
STRIPE_ENFORCE_HTTPS=true
STRIPE_ENABLE_RATE_LIMITING=true
STRIPE_WEBHOOK_SIGNATURE_VALIDATION=true
STRIPE_ENABLE_RADAR=true

# PCI DSS Compliance
STRIPE_PCI_COMPLIANT_MODE=true
STRIPE_CARD_DATA_ENCRYPTION=true

# EU GDPR Compliance
STRIPE_GDPR_COMPLIANT=true
STRIPE_DATA_RETENTION_DAYS=2555
STRIPE_ENABLE_DATA_EXPORT=true

# ----------------------------------------------------------------------------
# MONITORING & ANALYTICS
# ----------------------------------------------------------------------------

# Performance Monitoring
STRIPE_ENABLE_DETAILED_LOGGING=true
STRIPE_LOG_WEBHOOK_EVENTS=true
STRIPE_MONITOR_PAYMENT_LATENCY=true

# Analytics Configuration
STRIPE_TRACK_CONVERSION_METRICS=true
STRIPE_TRACK_CHURN_METRICS=true
STRIPE_TRACK_REVENUE_METRICS=true

# Alert Thresholds
STRIPE_FAILED_PAYMENT_ALERT_THRESHOLD=5
STRIPE_WEBHOOK_FAILURE_ALERT_THRESHOLD=3
STRIPE_CHURN_RATE_ALERT_THRESHOLD=10

# ----------------------------------------------------------------------------
# DEVELOPMENT & TESTING
# ----------------------------------------------------------------------------

# Development Settings (only for development/staging)
STRIPE_LOG_LEVEL=debug
STRIPE_ENABLE_TEST_WEBHOOKS=true
STRIPE_MOCK_PAYMENT_DELAYS=false

# Test Card Numbers (for development only)
# 4242424242424242 - Visa (no authentication required)
# 4000002500003155 - Visa (authentication required)
# 5555555555554444 - Mastercard
# 4000058260000005 - SEPA Debit
# 4000002080000001 - iDEAL

# Load Testing Configuration
STRIPE_ENABLE_LOAD_TESTING=false
STRIPE_MAX_CONCURRENT_REQUESTS=100

# ----------------------------------------------------------------------------
# INTEGRATION SETTINGS
# ----------------------------------------------------------------------------

# Database Integration
STRIPE_SYNC_CUSTOMER_DATA=true
STRIPE_SYNC_SUBSCRIPTION_DATA=true
STRIPE_SYNC_PAYMENT_DATA=true
STRIPE_ENABLE_WEBHOOKS_QUEUE=true

# Email Integration
STRIPE_SEND_RECEIPT_EMAILS=true
STRIPE_SEND_INVOICE_EMAILS=true
STRIPE_SEND_PAYMENT_FAILED_EMAILS=true

# CRM Integration
STRIPE_ENABLE_CRM_SYNC=false
STRIPE_CRM_WEBHOOK_URL=

# ----------------------------------------------------------------------------
# BACKUP & DISASTER RECOVERY
# ----------------------------------------------------------------------------

# Backup Configuration
STRIPE_BACKUP_CUSTOMER_DATA=true
STRIPE_BACKUP_PAYMENT_DATA=true
STRIPE_BACKUP_FREQUENCY_HOURS=24

# Disaster Recovery
STRIPE_ENABLE_FAILOVER=true
STRIPE_BACKUP_WEBHOOK_ENDPOINTS=https://backup.your-domain.com/api/webhooks/stripe

# ----------------------------------------------------------------------------
# LOCALIZATION
# ----------------------------------------------------------------------------

# Supported Locales (primary: English, secondary: German, French, Spanish)
STRIPE_SUPPORTED_LOCALES=en,de,fr,es,it,nl,pt,pl,da,no,sv,fi,cs,hu,ro
STRIPE_DEFAULT_LOCALE=en

# Currency Configuration
STRIPE_SUPPORTED_CURRENCIES=EUR,USD,GBP,CHF,SEK,DKK,NOK
STRIPE_DEFAULT_CURRENCY=EUR
STRIPE_CURRENCY_CONVERSION_ENABLED=false

# Regional Settings
STRIPE_DEFAULT_TIMEZONE=Europe/Amsterdam
STRIPE_DATE_FORMAT=DD/MM/YYYY
STRIPE_TIME_FORMAT=24h

# ============================================================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ============================================================================
#
# Before going live, ensure you have:
# [ ] Replaced all test keys with live keys
# [ ] Updated webhook endpoints to production URLs
# [ ] Enabled Stripe Radar for fraud prevention
# [ ] Set up proper tax configuration for your regions
# [ ] Configured customer portal settings
# [ ] Set up monitoring and alerting
# [ ] Tested all payment flows thoroughly
# [ ] Verified EU compliance settings
# [ ] Set up backup webhook endpoints
# [ ] Configured proper error handling and logging
#
# SECURITY REMINDER:
# [ ] Never expose secret keys in client-side code
# [ ] Use HTTPS for all webhook endpoints
# [ ] Validate all webhook signatures
# [ ] Implement proper rate limiting
# [ ] Monitor for suspicious activity
#
# ============================================================================