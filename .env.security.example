# Mailsender Security and Performance Configuration Example
# Copy this file to .env and configure with your actual values

# Basic Configuration
NODE_ENV=production
PORT=4000

# Security Keys (Generate strong random values)
JWT_SECRET=your-extremely-strong-jwt-secret-key-minimum-32-characters-long
JWT_REFRESH_SECRET=your-extremely-strong-jwt-refresh-secret-key-minimum-32-characters-long
EMAIL_ENCRYPTION_KEY=your-extremely-strong-encryption-key-minimum-32-characters-long

# Database Configuration
DATABASE_URL=postgresql://username:password@localhost:5432/mailsender
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=your-supabase-service-key
SUPABASE_ANON_KEY=your-supabase-anon-key

# Redis Configuration (for caching and sessions)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password-if-required

# OAuth2 Configuration (Google)
GOOGLE_OAUTH2_CLIENT_ID=your-google-oauth2-client-id
GOOGLE_OAUTH2_CLIENT_SECRET=your-google-oauth2-client-secret
GOOGLE_OAUTH2_REDIRECT_URI=https://yourdomain.com/auth/google/callback

# OAuth2 Configuration (Microsoft) - Optional
MICROSOFT_OAUTH2_CLIENT_ID=your-microsoft-oauth2-client-id
MICROSOFT_OAUTH2_CLIENT_SECRET=your-microsoft-oauth2-client-secret
MICROSOFT_OAUTH2_REDIRECT_URI=https://yourdomain.com/auth/microsoft/callback

# Stripe Configuration (for billing)
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret
STRIPE_PRICE_BASIC_MONTHLY=price_your-basic-monthly-price-id
STRIPE_PRICE_PRO_MONTHLY=price_your-pro-monthly-price-id
STRIPE_PRICE_ENTERPRISE_MONTHLY=price_your-enterprise-monthly-price-id

# Frontend Configuration
FRONTEND_URL=https://yourdomain.com
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Email Configuration (SMTP fallback)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-specific-password

# Security Configuration
BCRYPT_ROUNDS=12
SESSION_TIMEOUT=3600
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Performance Monitoring
APM_ENABLED=true
APM_SAMPLING_RATE=1.0
PERFORMANCE_MONITORING_ENABLED=true
SLOW_REQUEST_THRESHOLD=3000

# Logging Configuration
LOG_LEVEL=info
LOG_FILE_ENABLED=true
LOG_FILE_PATH=logs/application.log
LOG_MAX_FILES=7
LOG_MAX_SIZE=100mb

# Security Features
CSRF_PROTECTION_ENABLED=true
SQL_INJECTION_PROTECTION_ENABLED=true
XSS_PROTECTION_ENABLED=true
SECURITY_HEADERS_ENABLED=true
RATE_LIMITING_ENABLED=true

# Development/Debug (set to false in production)
DEBUG_MODE=false
ENABLE_DEBUG_ROUTES=false
SECURITY_AUDIT_ON_STARTUP=false

# File Upload Configuration
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=csv,xlsx,txt
UPLOAD_TEMP_DIR=/tmp/uploads

# Queue Configuration
QUEUE_REDIS_URL=redis://localhost:6379
QUEUE_CONCURRENCY=5
QUEUE_ATTEMPT_LIMIT=3
QUEUE_BACKOFF_DELAY=5000

# Database Pool Configuration
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_ACQUIRE_TIMEOUT=60000

# Memory Management
MEMORY_THRESHOLD_WARNING=85
MEMORY_THRESHOLD_CRITICAL=95
GC_INTERVAL=300000

# SSL/TLS Configuration (for production)
HTTPS_ENABLED=false
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_KEY_PATH=/path/to/ssl/key.pem

# External Services
WEBHOOK_TIMEOUT=30000
API_TIMEOUT=30000
EXTERNAL_API_RETRY_ATTEMPTS=3

# Compliance and Privacy
DATA_RETENTION_DAYS=365
GDPR_COMPLIANCE_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=90

# Monitoring and Alerting
HEALTH_CHECK_INTERVAL=30000
ERROR_NOTIFICATION_WEBHOOK=https://your-webhook-url
ALERT_EMAIL=admin@yourdomain.com

# Optional: External Services
SENTRY_DSN=https://your-sentry-dsn
NEW_RELIC_LICENSE_KEY=your-new-relic-license
DATADOG_API_KEY=your-datadog-api-key

# Example strong key generation commands:
# JWT_SECRET=$(openssl rand -base64 48)
# JWT_REFRESH_SECRET=$(openssl rand -base64 48)  
# EMAIL_ENCRYPTION_KEY=$(openssl rand -base64 48)